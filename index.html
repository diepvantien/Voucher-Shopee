<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mã Giảm Giá Shopee | Voucher Shopee Mới Nhất</title>
    <meta name="description" content="Tổng hợp mã giảm giá, voucher Shopee mới nhất. Cập nhật liên tục các mã freeship, giảm giá và hoàn xu Shopee.">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🛒</text></svg>">
    <style>
        :root {
            --primary-color: #ee4d2d;
            --secondary-color: #f5f5f5;
            --text-color: #333;
            --border-color: #e0e0e0;
            --light-gray: #f8f8f8;
            --success-color: #4caf50;
            --button-hover: #d23f21;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--secondary-color);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        header {
            background-color: #fff;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-top {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 0;
            text-align: center;
        }

        .header-top h1 {
            font-size: 24px;
            margin: 0;
        }

        .header-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
        }

        .brand {
            display: flex;
            align-items: center;
        }

        .brand img {
            height: 40px;
            margin-right: 10px;
        }

        .brand span {
            font-size: 22px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .search-box {
            flex: 1;
            max-width: 500px;
            margin: 0 20px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 10px 15px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
            font-size: 14px;
            outline: none;
        }

        .search-box i {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-color);
        }

        /* Main content */
        main {
            padding: 30px 0;
        }

        .section-title {
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
        }

        .section-title i {
            margin-right: 10px;
        }

        .vouchers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .voucher-item {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            height: 100%;
            display: flex;
            flex-direction: column;
        }

        .voucher-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .voucher-top {
            position: relative;
        }

        .voucher-image {
            width: 100%;
            height: 140px;
            object-fit: cover;
            display: block;
        }

        .voucher-tag {
            position: absolute;
            top: 10px;
            left: 0;
            background-color: var(--primary-color);
            color: white;
            padding: 5px 10px;
            font-size: 12px;
            border-radius: 0 4px 4px 0;
            font-weight: bold;
        }

        .voucher-content {
            padding: 15px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .voucher-title {
            font-size: 16px;
            font-weight: 700;
            line-height: 1.4;
            margin-bottom: 10px;
            color: var(--primary-color);
            min-height: 45px;
        }

        .voucher-description {
            font-size: 14px;
            color: #666;
            margin-bottom: 15px;
            flex-grow: 1;
        }

        .voucher-meta {
            font-size: 13px;
            color: #666;
            margin-top: auto;
            margin-bottom: 15px;
        }

        .voucher-meta div {
            margin-bottom: 5px;
            display: flex;
            align-items: center;
        }

        .voucher-meta i {
            margin-right: 5px;
            color: var(--primary-color);
            width: 16px;
            text-align: center;
        }

        .voucher-code {
            background-color: var(--light-gray);
            border: 1px dashed var(--border-color);
            padding: 10px;
            text-align: center;
            font-family: monospace;
            font-size: 16px;
            font-weight: bold;
            color: var(--primary-color);
            letter-spacing: 1px;
            margin: 10px 0;
            position: relative;
        }

        .copied-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            display: none;
        }

        .voucher-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .btn {
            padding: 10px;
            text-align: center;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .btn-copy {
            background-color: var(--light-gray);
            color: var(--text-color);
        }

        .btn-copy:hover {
            background-color: var(--border-color);
        }

        .btn-use {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-use:hover {
            background-color: var(--button-hover);
        }

        /* Categories section */
        .categories {
            display: flex;
            overflow-x: auto;
            margin-bottom: 30px;
            padding-bottom: 15px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
            scrollbar-color: var(--primary-color) var(--light-gray);
        }

        .categories::-webkit-scrollbar {
            height: 4px;
        }

        .categories::-webkit-scrollbar-track {
            background: var(--light-gray);
        }

        .categories::-webkit-scrollbar-thumb {
            background-color: var(--primary-color);
            border-radius: 10px;
        }

        .category-item {
            flex: 0 0 auto;
            padding: 10px 20px;
            margin-right: 10px;
            background-color: white;
            border-radius: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-color);
            white-space: nowrap;
        }

        .category-item:hover, .category-item.active {
            background-color: var(--primary-color);
            color: white;
        }

        /* Footer styles */
        footer {
            background-color: white;
            padding: 30px 0;
            border-top: 1px solid var(--border-color);
            margin-top: 40px;
        }

        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .footer-column {
            flex: 1;
            min-width: 200px;
            margin-bottom: 20px;
        }

        .footer-column h3 {
            font-size: 18px;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column ul li a {
            color: #666;
            text-decoration: none;
            transition: color 0.2s ease;
        }

        .footer-column ul li a:hover {
            color: var(--primary-color);
        }

        .footer-bottom {
            border-top: 1px solid var(--border-color);
            padding-top: 20px;
            margin-top: 20px;
            text-align: center;
            color: #666;
            font-size: 14px;
        }

        /* Success notification */
        .success-message {
            position: fixed;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--success-color);
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
        }

        /* Loading spinner */
        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px 0;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: 3px solid rgba(238, 77, 45, 0.1);
            border-top-color: var(--primary-color);
            animation: spin 1s linear infinite;
            margin-bottom: 10px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Store banners */
        .store-banner {
            margin-bottom: 30px;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .store-banner img {
            width: 100%;
            display: block;
        }

        /* Responsive styles */
        @media (max-width: 768px) {
            .header-nav {
                flex-direction: column;
                padding-top: 15px;
            }
            
            .search-box {
                margin: 15px 0;
                max-width: 100%;
            }
            
            .vouchers-grid {
                grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            }
            
            .footer-column {
                flex-basis: 50%;
            }
        }

        @media (max-width: 480px) {
            .vouchers-grid {
                grid-template-columns: 1fr;
            }
            
            .voucher-buttons {
                grid-template-columns: 1fr;
            }
            
            .footer-column {
                flex-basis: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="success-message" id="success-message">Đã sao chép mã giảm giá!</div>
    
    <header>
        <div class="header-top">
            <div class="container">
                <h1>Mã Giảm Giá Shopee - Tổng Hợp Voucher Mới Nhất</h1>
            </div>
        </div>
        <div class="container">
            <div class="header-nav">
                <div class="brand">
                    <img src="https://i.ibb.co/6BSfNcF/shopee-logo.png" alt="Shopee Logo">
                    <span>VOUCHER SHOPEE</span>
                </div>
                <div class="search-box">
                    <input type="text" id="search-input" placeholder="Tìm kiếm mã giảm giá...">
                    <i class="fas fa-search"></i>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="store-banner">
            <img src="https://i.ibb.co/SQZLyJ9/shopee-banner.jpg" alt="Shopee Banner">
        </div>
        
        <div class="categories" id="categories">
            <div class="category-item active" data-category="all">Tất cả</div>
            <div class="category-item" data-category="freeship">Freeship</div>
            <div class="category-item" data-category="discount">Giảm giá</div>
            <div class="category-item" data-category="cashback">Hoàn xu</div>
            <div class="category-item" data-category="other">Khác</div>
        </div>
        
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <p>Đang tải mã giảm giá...</p>
        </div>
        
        <section id="freeship-section">
            <h2 class="section-title"><i class="fas fa-shipping-fast"></i> Mã Freeship</h2>
            <div class="vouchers-grid" id="freeship-vouchers"></div>
        </section>
        
        <section id="discount-section">
            <h2 class="section-title"><i class="fas fa-tags"></i> Mã Giảm Giá</h2>
            <div class="vouchers-grid" id="discount-vouchers"></div>
        </section>
        
        <section id="cashback-section">
            <h2 class="section-title"><i class="fas fa-coins"></i> Mã Hoàn Xu</h2>
            <div class="vouchers-grid" id="cashback-vouchers"></div>
        </section>
        
        <section id="other-section">
            <h2 class="section-title"><i class="fas fa-gift"></i> Voucher Khác</h2>
            <div class="vouchers-grid" id="other-vouchers"></div>
        </section>
    </main>

    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Về chúng tôi</h3>
                    <ul>
                        <li><a href="#">Giới thiệu</a></li>
                        <li><a href="#">Chính sách bảo mật</a></li>
                        <li><a href="#">Điều khoản sử dụng</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Hỗ trợ</h3>
                    <ul>
                        <li><a href="#">Hướng dẫn sử dụng</a></li>
                        <li><a href="#">Câu hỏi thường gặp</a></li>
                        <li><a href="#">Liên hệ</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Cửa hàng khác</h3>
                    <ul>
                        <li><a href="#">Lazada</a></li>
                        <li><a href="#">Tiki</a></li>
                        <li><a href="#">Sendo</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <p>© 2025 Voucher Shopee | Dữ liệu được cập nhật từ <a href="https://docs.google.com/document/d/1KZCnfEoQ4zpFv9tqO5Z625kBiw5KGQfGKhVyoZeb13w/edit?usp=sharing" target="_blank">Google Docs</a> | <a href="https://github.com/diepvantien/Voucher-Shopee" target="_blank">GitHub</a></p>
                <p id="last-updated">Cập nhật lần cuối: 04/04/2025</p>
            </div>
        </div>
    </footer>

    <script>
        // Dữ liệu voucher với URL affiliate ngắn gọn
        const VOUCHERS_DATA = [
            // Freeship vouchers
            {
                code: "MYFS50425",
                title: "Freeship 15K",
                description: "Đơn hàng từ 0Đ, giảm 15K phí vận chuyển cho tất cả đơn hàng",
                category: "freeship",
                type: "Freeship",
                validUntil: "30/04/2025",
                affiliate: "https://s.shopee.vn/qVtsbRqMc",
                minOrder: "0Đ",
                image: "https://i.ibb.co/MkMxQKm/freeship-badge.jpg"
            },
            {
                code: "SHOPEEFREESHIP",
                title: "Freeship Extra 70K",
                description: "Giảm tới 70K phí vận chuyển cho đơn hàng từ 150K",
                category: "freeship",
                type: "Freeship",
                validUntil: "30/04/2025",
                minOrder: "150K",
                affiliate: "https://s.shopee.vn/aKyzKotki",
                image: "https://i.ibb.co/MkMxQKm/freeship-badge.jpg"
            },
            {
                code: "FREESHIP0D04",
                title: "Freeship 0Đ",
                description: "Giảm 100% phí vận chuyển tối đa 25K cho tất cả sản phẩm",
                category: "freeship",
                type: "Freeship",
                validUntil: "15/04/2025",
                minOrder: "50K",
                affiliate: "https://s.shopee.vn/RjmJkYVVP",
                image: "https://i.ibb.co/MkMxQKm/freeship-badge.jpg"
            },
            {
                code: "CB25FREE425",
                title: "Freeship Xtra",
                description: "Freeship cho đơn hàng từ 0Đ, áp dụng cho tất cả sản phẩm",
                category: "freeship",
                type: "Freeship",
                validUntil: "30/04/2025",
                affiliate: "https://s.shopee.vn/wJMvMhLCc",
                minOrder: "0Đ",
                image: "https://i.ibb.co/MkMxQKm/freeship-badge.jpg"
            },
            {
                code: "FSMALL0D",
                title: "Freeship Mall 0Đ",
                description: "Miễn phí vận chuyển cho đơn hàng Shopee Mall từ 300K",
                category: "freeship",
                type: "Freeship",
                validUntil: "15/04/2025",
                minOrder: "300K",
                affiliate: "https://s.shopee.vn/hkYhSyCVL",
                image: "https://i.ibb.co/g73J9Rh/shopee-mall.jpg"
            },
            
            // Discount vouchers
            {
                code: "CPNEW50",
                title: "Giảm 50K",
                description: "Dành cho người dùng mới, giảm 50K cho đơn hàng từ 150K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "31/05/2025",
                minOrder: "150K",
                affiliate: "https://s.shopee.vn/cPiKfDEjs",
                image: "https://i.ibb.co/9gLnT7v/discount-badge.jpg"
            },
            {
                code: "CPNEW25",
                title: "Giảm 25K",
                description: "Dành cho người dùng mới, giảm 25K cho đơn hàng từ 50K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "31/05/2025",
                minOrder: "50K",
                affiliate: "https://s.shopee.vn/KfXHTLLjG",
                image: "https://i.ibb.co/9gLnT7v/discount-badge.jpg"
            },
            {
                code: "NEWMALL25",
                title: "Giảm 25K đơn Shopee Mall",
                description: "Áp dụng cho sản phẩm tại Shopee Mall, đơn tối thiểu 250K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "30/04/2025",
                minOrder: "250K",
                affiliate: "https://s.shopee.vn/qLEHnaeGL",
                image: "https://i.ibb.co/g73J9Rh/shopee-mall.jpg"
            },
            {
                code: "MALLCT100",
                title: "Giảm 100K đơn Shopee Mall",
                description: "Áp dụng cho sản phẩm tại Shopee Mall, đơn tối thiểu 1000K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "15/04/2025",
                minOrder: "1000K",
                affiliate: "https://s.shopee.vn/jJhKumYFm",
                image: "https://i.ibb.co/g73J9Rh/shopee-mall.jpg"
            },
            {
                code: "SPPFOOD40",
                title: "Giảm 40K ShopeeFood",
                description: "Đặt món từ ShopeeFood, giảm 40K cho đơn từ 120K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "15/04/2025",
                minOrder: "120K",
                affiliate: "https://s.shopee.vn/xVtEksPQs",
                image: "https://i.ibb.co/yYqLt0b/shopee-food.jpg"
            },
            {
                code: "TOANCAU8K4",
                title: "Giảm 8K đơn hàng quốc tế",
                description: "Áp dụng cho đơn hàng quốc tế, giảm 8K cho đơn từ 50K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "10/04/2025",
                minOrder: "50K",
                affiliate: "https://s.shopee.vn/mGjAYYdVH",
                image: "https://i.ibb.co/9gLnT7v/discount-badge.jpg"
            },
            {
                code: "NEWTOALL",
                title: "Voucher toàn sàn",
                description: "Giảm 10% tối đa 100K cho tất cả sản phẩm trên Shopee",
                category: "discount",
                type: "Giảm giá",
                validUntil: "20/04/2025",
                minOrder: "500K",
                affiliate: "https://s.shopee.vn/tFwPJZRZq",
                image: "https://i.ibb.co/9gLnT7v/discount-badge.jpg"
            },
            {
                code: "SHOPEE4ALL",
                title: "Giảm 20K cho đơn hàng",
                description: "Áp dụng cho tất cả sản phẩm, đơn tối thiểu 100K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "30/04/2025",
                minOrder: "100K",
                affiliate: "https://s.shopee.vn/fVAvHTVsk",
                image: "https://i.ibb.co/9gLnT7v/discount-badge.jpg"
            },
            {
                code: "SIEUTHI100K",
                title: "Giảm 100K Siêu thị",
                description: "Áp dụng cho đơn hàng Siêu Thị Shopee từ 500K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "15/04/2025",
                minOrder: "500K",
                affiliate: "https://s.shopee.vn/aBfLpWhwA",
                image: "https://i.ibb.co/YLBZgG8/shopee-supermarket.jpg"
            },
            {
                code: "MALL88K04",
                title: "Giảm 88K cho Shopee Mall",
                description: "Áp dụng cho sản phẩm Shopee Mall, đơn từ 500K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "08/04/2025",
                minOrder: "500K",
                affiliate: "https://s.shopee.vn/bYAXxZUcx",
                image: "https://i.ibb.co/g73J9Rh/shopee-mall.jpg"
            },
            {
                code: "MKT150K425",
                title: "Giảm 150K cho Shopee Mall",
                description: "Đơn hàng Shopee Mall từ 1.5 triệu, giảm 150K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "30/04/2025",
                minOrder: "1.5 triệu",
                affiliate: "https://s.shopee.vn/pAvSdcDGZ",
                image: "https://i.ibb.co/g73J9Rh/shopee-mall.jpg"
            },
            {
                code: "BRANDSP88K",
                title: "Giảm 88K Thương hiệu",
                description: "Áp dụng cho các thương hiệu chính hãng, đơn từ 400K",
                category: "discount",
                type: "Giảm giá",
                validUntil: "10/04/2025",
                minOrder: "400K",
                affiliate: "https://s.shopee.vn/mVDQRcCkf",
                image: "https://i.ibb.co/9gLnT7v/discount-badge.jpg"
            },
            
            // Cashback vouchers
            {
                code: "ELMTCB10",
                title: "Hoàn 10% xu",
                description: "Áp dụng cho đơn hàng Shopee Mall, tối đa 100K xu",
                category: "cashback",
                type: "Hoàn xu",
                validUntil: "15/04/2025",
                minOrder: "500K",
                affiliate: "https://s.shopee.vn/vSJGVWFwX",
                image: "https://i.ibb.co/gDdKY0p/cashback-badge.jpg"
            },
            {
                code: "SPPCOINELM",
                title: "Hoàn 100K xu",
                description: "Lần đầu thanh toán qua ví SPayLater, hoàn 100K xu",
                category: "cashback",
                type: "Hoàn xu",
                validUntil: "10/04/2025",
                affiliate: "https://s.shopee.vn/qWsHyKdHj",
                image: "https://i.ibb.co/gDdKY0p/cashback-badge.jpg"
            },
            {
                code: "SPPCOIN88",
                title: "Hoàn 15% xu",
                description: "Tối đa 70K, đơn tối thiểu 300K, hoàn xu vào ví Shopee",
                category: "cashback",
                type: "Hoàn xu",
                validUntil: "30/04/2025",
                minOrder: "300K",
                affiliate: "https://s.shopee.vn/cDpXxkbBm",
                image: "https://i.ibb.co/gDdKY0p/cashback-badge.jpg"
            },
            {
                code: "SPPCOIN25K",
                title: "Hoàn 25K xu",
                description: "Cho đơn hàng đầu tiên từ 150K, hoàn 25K xu",
                category: "cashback",
                type: "Hoàn xu",
                validUntil: "30/04/2025",
                minOrder: "150K",
                affiliate: "https://s.shopee.vn/rHmGaVJbY",
                image: "https://i.ibb.co/gDdKY0p/cashback-badge.jpg"
            },
            {
                code: "TAINAPXU",
                title: "Hoàn 20K xu khi tải app",
                description: "Dành cho người dùng mới tải app Shopee, hoàn 20K xu",
                category: "cashback",
                type: "Hoàn xu",
                validUntil: "30/04/2025",
                affiliate: "https://s.shopee.vn/yWaQwXCzk",
                image: "https://i.ibb.co/gDdKY0p/cashback-badge.jpg"
            },
            {
                code: "HOANHUNG",
                title: "Hoàn 100K xu",
                description: "Cho người dùng VIP, hoàn 100K xu cho đơn từ 1 triệu",
                category: "cashback",
                type: "Hoàn xu",
                validUntil: "30/04/2025",
                minOrder: "1 triệu",
                affiliate: "https://s.shopee.vn/kYhPpMqQn",
                image: "https://i.ibb.co/gDdKY0p/cashback-badge.jpg"
            },
            
            // Other vouchers
            {
                code: "NEWSHOPEE",
                title: "Combo khuyến mãi",
                description: "Miễn phí vận chuyển + Giảm 20K + Hoàn 10K xu",
                category: "other",
                type: "Combo",
                validUntil: "15/04/2025",
                minOrder: "200K",
                affiliate: "https://s.shopee.vn/rAsSvPqMs",
                image: "https://i.ibb.co/sQSJVmY/shopee-voucher.jpg"
            },
            {
                code: "DOISOAT88",
                title: "Combo Shopee Mall",
                description: "Đồng kiểm + Hoàn xu 10% cho đơn hàng từ Shopee Mall",
                category: "other",
                type: "Đồng kiểm",
                validUntil: "30/04/2025",
                minOrder: "500K",
                affiliate: "https://s.shopee.vn/uYhSdCvBp",
                image: "https://i.ibb.co/g73J9Rh/shopee-mall.jpg"
            },
            {
                code: "HBSP0425",
                title: "Quà tặng",
                description: "Tặng thêm quà cho đơn từ thương hiệu cao cấp từ 1 triệu",
                category: "other",
                type: "Quà tặng",
                validUntil: "30/04/2025",
                minOrder: "1 triệu",
                affiliate: "https://s.shopee.vn/sAeVgBnTm",
                image: "https://i.ibb.co/sQSJVmY/shopee-voucher.jpg"
            },
            {
                code: "SPPMKTPLACE",
                title: "Combo ưu đãi",
                description: "Freeship + Hoàn xu cho tất cả sản phẩm trên Shopee",
                category: "other",
                type: "Combo",
                validUntil: "30/04/2025",
                minOrder: "0Đ",
                affiliate: "https://s.shopee.vn/pQjHkXcSd",
                image: "https://i.ibb.co/sQSJVmY/shopee-voucher.jpg"
            }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            // Khởi tạo ứng dụng
            initApp();
            
            // Cập nhật ngày hiện tại
            const today = new Date();
            document.getElementById('last-updated').textContent = `Cập nhật lần cuối: ${today.getDate().toString().padStart(2, '0')}/${(today.getMonth() + 1).toString().padStart(2, '0')}/${today.getFullYear()}`;
        });

        async function initApp() {
            try {
                // Hiển thị loading
                document.getElementById('loading').style.display = 'flex';
                document.getElementById('freeship-section').style.display = 'none';
                document.getElementById('discount-section').style.display = 'none';
                document.getElementById('cashback-section').style.display = 'none';
                document.getElementById('other-section').style.display = 'none';
                
                // Sử dụng dữ liệu có sẵn
                const vouchers = VOUCHERS_DATA;
                
                // Lưu trữ vouchers cho tìm kiếm và lọc
                window.allVouchers = vouchers;
                
                // Phân loại và hiển thị vouchers
                categorizeAndDisplayVouchers(vouchers);
                
                // Thiết lập tìm kiếm
                setupSearch();
                
                // Thiết lập lọc danh mục
                setupCategoryFilter();
                
                // Ẩn loading
                document.getElementById('loading').style.display = 'none';
                document.getElementById('freeship-section').style.display = 'block';
                document.getElementById('discount-section').style.display = 'block';
                document.getElementById('cashback-section').style.display = 'block';
                document.getElementById('other-section').style.display = 'block';
            } catch (error) {
                console.error('Lỗi khởi tạo ứng dụng:', error);
                document.getElementById('loading').innerHTML = `
                    <p>Lỗi tải mã giảm giá. Vui lòng thử lại sau.</p>
                    <p>Chi tiết lỗi: ${error.message}</p>
                `;
            }
        }

        function categorizeAndDisplayVouchers(vouchers) {
            const freeshipVouchers = vouchers.filter(v => v.category === 'freeship');
            const discountVouchers = vouchers.filter(v => v.category === 'discount');
            const cashbackVouchers = vouchers.filter(v => v.category === 'cashback');
            const otherVouchers = vouchers.filter(v => v.category === 'other');
            
            displayVouchersInSection('freeship-vouchers', freeshipVouchers);
            displayVouchersInSection('discount-vouchers', discountVouchers);
            displayVouchersInSection('cashback-vouchers', cashbackVouchers);
            displayVouchersInSection('other-vouchers', otherVouchers);
        }

        function displayVouchersInSection(sectionId, vouchers) {
            const container = document.getElementById(sectionId);
            container.innerHTML = '';
            
            if (vouchers.length === 0) {
                container.innerHTML = '<p class="empty-message">Không có mã giảm giá nào trong danh mục này.</p>';
                return;
            }
            
            vouchers.forEach(voucher => {
                const voucherElement = createVoucherElement(voucher);
                container.appendChild(voucherElement);
            });
        }

        function createVoucherElement(voucher) {
            const voucherItem = document.createElement('div');
            voucherItem.className = 'voucher-item';
            voucherItem.dataset.category = voucher.category;
            
            const expiryDate = new Date(voucher.validUntil.split('/').reverse().join('/'));
            const today = new Date();
            const daysLeft = Math.ceil((expiryDate - today) / (1000 * 60 * 60 * 24));
            
            voucherItem.innerHTML = `
                <div class="voucher-top">
                    <img src="${voucher.image || 'https://i.ibb.co/sQSJVmY/shopee-voucher.jpg'}" alt="${voucher.title}" class="voucher-image">
                    <div class="voucher-tag">${voucher.type}</div>
                </div>
                <div class="voucher-content">
                    <h3 class="voucher-title">${escapeHTML(voucher.title)}</h3>
                    <p class="voucher-description">${escapeHTML(voucher.description)}</p>
                    
                    <div class="voucher-meta">
                        ${voucher.validUntil ? `
                        <div>
                            <i class="far fa-clock"></i> 
                            Hạn dùng: ${voucher.validUntil} 
                            ${daysLeft > 0 ? `(Còn ${daysLeft} ngày)` : '(Hết hạn)'}
                        </div>` : ''}
                        
                        ${voucher.minOrder ? `
                        <div>
                            <i class="fas fa-shopping-cart"></i> 
                            Đơn tối thiểu: ${voucher.minOrder}
                        </div>` : ''}
                    </div>
                    
                    <div class="voucher-code" data-code="${voucher.code}">
                        ${voucher.code}
                        <span class="copied-text">Đã sao chép!</span>
                    </div>
                    
                    <div class="voucher-buttons">
                        <button class="btn btn-copy" data-code="${voucher.code}">
                            <i class="far fa-copy"></i> Sao chép
                        </button>
                        <a href="${voucher.affiliate}" target="_blank" class="btn btn-use">
                            <i class="fas fa-external-link-alt"></i> Dùng ngay
                        </a>
                    </div>
                </div>
            `;
            
            // Thiết lập sự kiện sao chép mã
            const voucherCode = voucherItem.querySelector('.voucher-code');
            const copyBtn = voucherItem.querySelector('.btn-copy');
            
            voucherCode.addEventListener('click', function() {
                copyVoucherCode(this.dataset.code, this.querySelector('.copied-text'));
            });
            
            copyBtn.addEventListener('click', function(e) {
                e.preventDefault();
                copyVoucherCode(this.dataset.code);
            });
            
            return voucherItem;
        }

        function copyVoucherCode(code, copiedElement = null) {
            navigator.clipboard.writeText(code).then(() => {
                // Hiển thị thông báo
                const successMessage = document.getElementById('success-message');
                successMessage.textContent = `Đã sao chép mã: ${code}`;
                successMessage.style.display = 'block';
                
                // Hiển thị "Đã sao chép" trên phần tử cụ thể nếu có
                if (copiedElement) {
                    copiedElement.style.display = 'block';
                    setTimeout(() => {
                        copiedElement.style.display = 'none';
                    }, 2000);
                }
                
                // Ẩn thông báo sau 2 giây
                setTimeout(() => {
                    successMessage.style.display = 'none';
                }, 2000);
            }).catch(err => {
                console.error('Không thể sao chép mã:', err);
                alert(`Không thể sao chép mã: ${code}\nVui lòng sao chép thủ công.`);
            });
        }

        function setupSearch() {
            const searchInput = document.getElementById('search-input');
            
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase().trim();
                
                if (searchTerm === '') {
                    // Hiển thị lại tất cả mục
                    document.getElementById('freeship-section').style.display = 'block';
                    document.getElementById('discount-section').style.display = 'block';
                    document.getElementById('cashback-section').style.display = 'block';
                    document.getElementById('other-section').style.display = 'block';
                    categorizeAndDisplayVouchers(window.allVouchers);
                    return;
                }
                
                // Lọc vouchers theo từ khóa
                const filteredVouchers = window.allVouchers.filter(voucher => 
                    (voucher.title && voucher.title.toLowerCase().includes(searchTerm)) ||
                    (voucher.description && voucher.description.toLowerCase().includes(searchTerm)) ||
                    (voucher.code && voucher.code.toLowerCase().includes(searchTerm))
                );
                
                // Ẩn các section
                document.getElementById('freeship-section').style.display = 'none';
                document.getElementById('discount-section').style.display = 'none';
                document.getElementById('cashback-section').style.display = 'none';
                document.getElementById('other-section').style.display = 'none';
                
                // Hiển thị kết quả tìm kiếm phân loại theo danh mục
                const freeshipResults = filteredVouchers.filter(v => v.category === 'freeship');
                const discountResults = filteredVouchers.filter(v => v.category === 'discount');
                const cashbackResults = filteredVouchers.filter(v => v.category === 'cashback');
                const otherResults = filteredVouchers.filter(v => v.category === 'other');
                
                // Chỉ hiển thị các section có kết quả
                if (freeshipResults.length > 0) {
                    document.getElementById('freeship-section').style.display = 'block';
                    displayVouchersInSection('freeship-vouchers', freeshipResults);
                }
                
                if (discountResults.length > 0) {
                    document.getElementById('discount-section').style.display = 'block';
                    displayVouchersInSection('discount-vouchers', discountResults);
                }
                
                if (cashbackResults.length > 0) {
                    document.getElementById('cashback-section').style.display = 'block';
                    displayVouchersInSection('cashback-vouchers', cashbackResults);
                }
                
                if (otherResults.length > 0) {
                    document.getElementById('other-section').style.display = 'block';
                    displayVouchersInSection('other-vouchers', otherResults);
                }
                
                // Hiển thị thông báo nếu không có kết quả
                if (filteredVouchers.length === 0) {
                    document.getElementById('freeship-section').style.display = 'block';
                    document.getElementById('freeship-vouchers').innerHTML = 
                        '<p class="empty-message">Không tìm thấy mã giảm giá nào phù hợp với từ khóa "' + searchTerm + '"</p>';
                    
                    document.getElementById('discount-section').style.display = 'none';
                    document.getElementById('cashback-section').style.display = 'none';
                    document.getElementById('other-section').style.display = 'none';
                }
            });
        }

        function setupCategoryFilter() {
            const categoryItems = document.querySelectorAll('.category-item');
            
            categoryItems.forEach(item => {
                item.addEventListener('click', function() {
                    // Xóa active khỏi tất cả items
                    categoryItems.forEach(c => c.classList.remove('active'));
                    
                    // Thêm active cho item được chọn
                    this.classList.add('active');
                    
                    const category = this.dataset.category;
                    
                    if (category === 'all') {
                        // Hiển thị tất cả danh mục
                        document.getElementById('freeship-section').style.display = 'block';
                        document.getElementById('discount-section').style.display = 'block';
                        document.getElementById('cashback-section').style.display = 'block';
                        document.getElementById('other-section').style.display = 'block';
                        categorizeAndDisplayVouchers(window.allVouchers);
                    } else {
                        // Lọc vouchers theo danh mục
                        const filteredVouchers = window.allVouchers.filter(v => v.category === category);
                        
                        // Ẩn tất cả sections
                        document.getElementById('freeship-section').style.display = 'none';
                        document.getElementById('discount-section').style.display = 'none';
                        document.getElementById('cashback-section').style.display = 'none';
                        document.getElementById('other-section').style.display = 'none';
                        
                        // Hiển thị section tương ứng
                        document.getElementById(`${category}-section`).style.display = 'block';
                        displayVouchersInSection(`${category}-vouchers`, filteredVouchers);
                    }
                });
            });
        }

        // Helper function to escape HTML
        function escapeHTML(str) {
            if (!str) return '';
            
            return str.replace(/[&<>"']/g, function(match) {
                return {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#39;'
                }[match];
            });
        }
    </script>
</body>
</html>
